easyblock = 'CMakeMake'

name = 'Dalton'
version = '2020.0'

homepage = 'https://daltonprogram.org/'
description = """The Dalton code is a powerful tool for a wide range of molecular properties
 at different levels of theory.
 Any published work arising from use of one of the Dalton2016 programs
 must acknowledge that by a proper reference,
 https://www.daltonprogram.org/www/citation.html."""

toolchain = {'name': 'intel', 'version': '2020b'}
toolchainopts = {'usempi': True, 'openmp': True}

sources = [{
    'filename': SOURCE_TAR_GZ,
    'git_config': {
        'url': 'https://gitlab.com/dalton',
        'repo_name': 'dalton',
        'tag': 'Dalton%(version)s',
        'recursive': True,
    },
}]

builddependencies = [('CMake', '3.18.4'), ('Python', '3.8.6')]

configure_cmd = 'python ../dalton/setup --prefix="%(installdir)s" .'

separate_build_dir = True

sanity_check_paths = {
    'files': ['bin/dalton', 'bin/dalton.x'],
    'dirs': ['basis'],
}

moduleclass = 'chem'
